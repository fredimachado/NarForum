<h3 class="user-headings">Headings</h3>

@if(Headings != null)
{
    @foreach (var heading in Headings)
    {
        <HeadingCard Model="heading" CategoryName="@heading.CategoryName"></HeadingCard>
    }
    <Pagination TotalPages="@TotalPages" CurrentPage="@CurrentPage" BaseUrl="@getBaseUrl()" />
}

@code {

    [Parameter]
    public UserInfoVM UserInfo { get; set; }

    [Inject]
    public IHeadingService HeadingService { get; set; }

    public List<HeadingVM>? Headings { get; set; }


    private string getBaseUrl()
    {
        return $"category/";
    }

    // Pagination variables
    private int PageSize = 10; // Number of items per page
    private int TotalPages = 1;
    private int CurrentPage = 1;

    protected async override Task OnInitializedAsync()
    {
        HeadingsPaginationVM headingsPagination = await HeadingService.GetHeadingsByUserNameWithPagination(UserInfo.UserName, 1, PageSize);
        Headings = headingsPagination.Headings;
    }
}
